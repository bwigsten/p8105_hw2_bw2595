---
title: "p8105_hw2_bw2595"
author: "Blair Wigsten"
date: "9/25/2019"
output: github_document
editor_options: 
  chunk_output_type: inline
---

```{r}
library(tidyverse)
```

```{r}
library(readxl)
trashwheel_data = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 1) %>%
  janitor::clean_names() %>%
  select(-x15, -x16, -x17) %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0)))
```

```{r}
precip_2018 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 5, skip = 1) %>%
  janitor::clean_names() %>%
  drop_na() %>%
  mutate(year = 2018)
```

```{r}
precip_2017 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 6, skip = 1) %>%
  janitor::clean_names() %>%
  drop_na() %>%
  mutate(year = 2017)
```

```{r}
precip_2017_2018 =
  bind_rows(precip_2017, precip_2018) %>%
  janitor::clean_names() %>%
  select(year, month, total) %>%
  arrange(year, month) %>%
  mutate(
    month = as.numeric(month), 
    month = month.abb[month])
```

There are `r nrow(precip_2017_2018)` observations in the combined precipitation dataset and `r nrow(trashwheel_data)` observations in the trashwheel dataset. The total precipitation in 2018 was `r sum(pull(precip_2018, total))`. The key variables in both the trashwheel dataset and precipitation_2017_2018 are month and year, as they are the only variables in both datasets. The median number of sports balls collected in 2017 is `r trashwheel_data %>% filter(year == "2017") %>% pull(sports_balls) %>% median()`.
 

```{r}
pols_month = read_csv(file = "fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(
    month = as.numeric(month), 
    month = month.abb[month],
    prez_gop = recode(prez_gop, `1` = "gop", `0` = "dem", `2` = "gop"),
    president = prez_gop) %>%
  select(-day)
pols_month
```

```{r}
snp = read_csv(file = "fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("day", "month", "year")) %>%
  arrange(year, month) %>%
  mutate(
    month = as.numeric(month),
    month = month.abb[month]) %>%
  select(year, month, close)
snp
```

```{r}
unemployment = read.csv(file = "fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment rate") %>%
  rename(year = Year) %>%
  mutate(
    year = as.character(year))
unemployment
```

```{r}
snp_pols = 
  left_join(pols_month, snp, by = c("year", "month"))
```

```{r}
final_data = left_join(snp_pols, unemployment, by = c("year", "month"))
```

*write paragraph describing the data*

```{r}
baby_names = read_csv(file = "data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  rename(first_name = childs_first_name,
         birth_year = year_of_birth) %>%
  mutate(
    first_name = str_to_lower(first_name),
    ethnicity = str_to_lower(ethnicity),
    gender = str_to_lower(gender)) %>%
  distinct() %>%
  mutate(
    ethnicity = as.character(ethnicity),
    ethnicity = if_else(ethnicity == "black non hisp", "black non hispanic", ethnicity),
    ethnicity = if_else(ethnicity == "asian and paci", "asian and pacific islander", ethnicity),
    ethnicity = if_else(ethnicity == "white non hisp", "white non hispanic", ethnicity),
    ethnicity = as.factor(ethnicity))
```


```{r}
olivia_table = tibble(
  ethnicity = pull(baby_names, ethnicity), 
  birth_year = pull(baby_names, birth_year)
)
```


